<!DOCTYPE html>
<html>

  {% include head.html %}

  <body>

    {% include header.html %}

    <div class="page-content">
      <div class="wrapper">
        {{ content }}
      </div>
    </div>

    {% include footer.html %}

  </body>
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-78194842-1', 'auto');
      ga('send', 'pageview');

  var VIEW_ID = "ga:122549723"
  var CLIENT_ID = "957449287621-fkij59c2bacsf6m6mcm4ritjgbfuvn20.apps.googleusercontent.com"
      // Set the discovery URL.
  var DISCOVERY = 'https://analyticsreporting.googleapis.com/$discovery/rest';

  // Set authorized scope.
  var SCOPES = ['https://www.googleapis.com/auth/analytics.readonly'];


    // Handles the authorization flow.
    // `immediate` should be false when invoked from the button click.
    var useImmdiate = fasle;
    var authData = {
      client_id: CLIENT_ID,
      scope: SCOPES,
      immediate: useImmdiate
    };

    gapi.auth.authorize(authData, function(response) {
      var authButton = document.getElementById('auth-button');
      if (response.error) {
        authButton.hidden = false;
      }
      else {
        authButton.hidden = true;
        queryReports();
      }
    });

  function queryReports() {
    // Load the API from the client discovery URL.
    gapi.client.load(DISCOVERY
    ).then(function() {

        // Call the Analytics Reporting API V4 batchGet method.
        gapi.client.analyticsreporting.reports.batchGet( {
          "reportRequests":[
          {
            "viewId":VIEW_ID,
            "dateRanges":[
              {
                "startDate":"7daysAgo",
                "endDate":"today"
              }],
            "metrics":[
              {
                "expression":"ga:sessions"
              }]
          }]
        } ).then(function(response) {
          console.log(response);
        })
        .then(null, function(err) {
            // Log any errors.
            console.log(err);
        });
    });
  }

    </script>
</html>
